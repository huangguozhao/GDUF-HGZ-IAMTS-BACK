# å¤åˆ¶æµ‹è¯•ç”¨ä¾‹æ¥å£æ–‡æ¡£

## ğŸ“‹ æ¥å£åŸºæœ¬ä¿¡æ¯

```yaml
æ¥å£åç§°: å¤åˆ¶æµ‹è¯•ç”¨ä¾‹
æ¥å£è·¯å¾„: POST /api/testcases/{caseId}/copy
è¯·æ±‚æ–¹æ³•: POST
æ¥å£æè¿°: å¤åˆ¶æŒ‡å®šçš„æµ‹è¯•ç”¨ä¾‹ï¼Œç”Ÿæˆæ–°çš„æµ‹è¯•ç”¨ä¾‹ï¼ŒåŒ…å«åŸç”¨ä¾‹çš„æ‰€æœ‰é…ç½®ä¿¡æ¯
åŠŸèƒ½ç‰ˆæœ¬: v1.0
```

## ğŸ”‘ è¯·æ±‚å‚æ•°

### è·¯å¾„å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | æè¿° | ç¤ºä¾‹ |
|--------|------|------|------|------|
| caseId | Integer | æ˜¯ | è¦å¤åˆ¶çš„æºæµ‹è¯•ç”¨ä¾‹ID | 1 |

### è¯·æ±‚ä½“å‚æ•°

```json
{
  "caseCode": "string",
  "name": "string", 
  "description": "string"
}
```

| å‚æ•°å | ç±»å‹ | å¿…å¡« | é•¿åº¦é™åˆ¶ | æè¿° | ç¤ºä¾‹ |
|--------|------|------|----------|------|------|
| caseCode | String | æ˜¯ | 2-50 | æ–°ç”¨ä¾‹çš„ç¼–ç ï¼Œå¿…é¡»å”¯ä¸€ï¼Œåªèƒ½åŒ…å«å¤§å†™å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿å’Œè¿å­—ç¬¦ | "TC_AUTH001_001_COPY_20251021" |
| name | String | æ˜¯ | 2-100 | æ–°ç”¨ä¾‹çš„åç§° | "æ­£å¸¸ç™»å½•æµ‹è¯•(å‰¯æœ¬)" |
| description | String | å¦ | 0-500 | æ–°ç”¨ä¾‹çš„æè¿° | "ä½¿ç”¨æ­£ç¡®çš„ç”¨æˆ·åå’Œå¯†ç ç™»å½•" |

### è¯·æ±‚å¤´

| å‚æ•°å | å¿…å¡« | æè¿° | ç¤ºä¾‹ |
|--------|------|------|------|
| Content-Type | æ˜¯ | å†…å®¹ç±»å‹ | application/json |
| Authorization | æ˜¯ | è®¤è¯ä»¤ç‰Œ | Bearer {token} |

## ğŸ“¤ å“åº”æ ¼å¼

### æˆåŠŸå“åº” (200)

```json
{
  "code": 1,
  "msg": "æµ‹è¯•ç”¨ä¾‹å¤åˆ¶æˆåŠŸ",
  "data": {
    "caseId": 123,
    "caseCode": "TC_AUTH001_001_COPY_20251021",
    "name": "æ­£å¸¸ç™»å½•æµ‹è¯•(å‰¯æœ¬)",
    "description": "ä½¿ç”¨æ­£ç¡®çš„ç”¨æˆ·åå’Œå¯†ç ç™»å½•",
    "apiId": 1,
    "priority": "P0",
    "severity": "critical",
    "tags": ["ç™»å½•", "è®¤è¯"],
    "preConditions": [
      {
        "username": "testuser",
        "password": "testpass"
      }
    ],
    "testSteps": [
      {
        "step": 1,
        "operation": "å‘é€ç™»å½•è¯·æ±‚",
        "expected": "è¿”å›æˆåŠŸå“åº”"
      }
    ],
    "requestOverride": {
      "headers": {
        "Content-Type": "application/json"
      },
      "body": {
        "username": "testuser",
        "password": "testpass"
      }
    },
    "expectedHttpStatus": 200,
    "expectedResponseSchema": {
      "type": "object",
      "properties": {
        "code": {"type": "integer"},
        "msg": {"type": "string"},
        "data": {"type": "object"}
      }
    },
    "expectedResponseBody": "{\"code\":1,\"msg\":\"ç™»å½•æˆåŠŸ\"}",
    "assertions": [
      {
        "type": "status_code",
        "expected": 200
      },
      {
        "type": "json_path",
        "path": "$.code",
        "expected": "1"
      }
    ],
    "extractors": [
      {
        "name": "token",
        "expression": "$.data.token",
        "description": "æå–ç™»å½•token"
      }
    ],
    "validators": [],
    "isEnabled": true,
    "isTemplate": false,
    "templateId": 1,
    "version": "1.0",
    "creatorInfo": null,
    "createdAt": "2025-10-21T10:30:00",
    "updatedAt": "2025-10-21T10:30:00"
  }
}
```

### é”™è¯¯å“åº”

#### ç”¨ä¾‹ä¸å­˜åœ¨ (404)
```json
{
  "code": 0,
  "msg": "æµ‹è¯•ç”¨ä¾‹ä¸å­˜åœ¨"
}
```

#### ç”¨ä¾‹ç¼–ç å·²å­˜åœ¨ (400)
```json
{
  "code": 0,
  "msg": "ç”¨ä¾‹ç¼–ç å·²å­˜åœ¨ï¼Œè¯·ä½¿ç”¨å…¶ä»–ç¼–ç "
}
```

#### å‚æ•°éªŒè¯å¤±è´¥ (400)
```json
{
  "code": 0,
  "msg": "ç”¨ä¾‹ç¼–ç ä¸èƒ½ä¸ºç©º"
}
```

#### æƒé™ä¸è¶³ (403)
```json
{
  "code": 0,
  "msg": "æƒé™ä¸è¶³ï¼Œæ— æ³•å¤åˆ¶æµ‹è¯•ç”¨ä¾‹"
}
```

#### ç³»ç»Ÿå¼‚å¸¸ (500)
```json
{
  "code": -5,
  "msg": "å¤åˆ¶æµ‹è¯•ç”¨ä¾‹å¤±è´¥ï¼šç³»ç»Ÿå¼‚å¸¸"
}
```

## ğŸ’¡ ä¸šåŠ¡é€»è¾‘è¯´æ˜

### å¤åˆ¶è§„åˆ™

| å­—æ®µç±»å‹ | å¤„ç†æ–¹å¼ | è¯´æ˜ |
|---------|---------|------|
| **å®Œå…¨å¤åˆ¶** | åŸæ ·å¤åˆ¶ | api_id, priority, severity, tags, pre_conditions, test_steps, request_override, expected_http_status, expected_response_schema, expected_response_body, assertions, extractors, validators, is_enabled, version |
| **ç”¨æˆ·æŒ‡å®š** | ä½¿ç”¨è¯·æ±‚å‚æ•° | case_code, name, description |
| **ç³»ç»Ÿç”Ÿæˆ** | è‡ªåŠ¨ç”Ÿæˆ | case_id (è‡ªå¢), created_at, updated_at, created_by |
| **é‡ç½®å­—æ®µ** | è®¾ä¸ºé»˜è®¤å€¼ | is_template = false, template_id = æºç”¨ä¾‹ID |

### æƒé™æ§åˆ¶

- åªæœ‰å¯¹æºæµ‹è¯•ç”¨ä¾‹æœ‰ç®¡ç†æƒé™çš„ç”¨æˆ·æ‰èƒ½å¤åˆ¶
- æ–°ç”¨ä¾‹çš„åˆ›å»ºè€…ä¸ºå½“å‰ç™»å½•ç”¨æˆ·
- ç»§æ‰¿æºç”¨ä¾‹çš„æ¥å£å…³è”

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹

### æ­£å¸¸å¤åˆ¶æµ‹è¯•

```bash
curl -X POST "http://localhost:8080/api/testcases/1/copy" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer your-token" \
  -d '{
    "caseCode": "TC_AUTH001_001_COPY_20251021",
    "name": "æ­£å¸¸ç™»å½•æµ‹è¯•(å‰¯æœ¬)",
    "description": "ä½¿ç”¨æ­£ç¡®çš„ç”¨æˆ·åå’Œå¯†ç ç™»å½•"
  }'
```

### é”™è¯¯åœºæ™¯æµ‹è¯•

#### 1. ç”¨ä¾‹ä¸å­˜åœ¨
```bash
curl -X POST "http://localhost:8080/api/testcases/999/copy" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer your-token" \
  -d '{
    "caseCode": "TC_NEW_001",
    "name": "æ–°æµ‹è¯•ç”¨ä¾‹"
  }'
```

#### 2. ç¼–ç å·²å­˜åœ¨
```bash
curl -X POST "http://localhost:8080/api/testcases/1/copy" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer your-token" \
  -d '{
    "caseCode": "TC_AUTH001_001",
    "name": "é‡å¤ç¼–ç æµ‹è¯•"
  }'
```

#### 3. ç¼ºå°‘å¿…å¡«å‚æ•°
```bash
curl -X POST "http://localhost:8080/api/testcases/1/copy" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer your-token" \
  -d '{
    "caseCode": "",
    "name": ""
  }'
```

## ğŸ“Š ä½¿ç”¨åœºæ™¯

1. **å¿«é€Ÿåˆ›å»ºç›¸ä¼¼æµ‹è¯•ç”¨ä¾‹**
   - å¤åˆ¶å·²æœ‰ç”¨ä¾‹å¹¶ä¿®æ”¹éƒ¨åˆ†å‚æ•°
   - æé«˜æµ‹è¯•ç”¨ä¾‹ç¼–å†™æ•ˆç‡

2. **ç‰ˆæœ¬è¿­ä»£**
   - ä¿ç•™æ—§ç‰ˆæœ¬ç”¨ä¾‹çš„åŒæ—¶åˆ›å»ºæ–°ç‰ˆæœ¬
   - æ–¹ä¾¿ç‰ˆæœ¬å¯¹æ¯”å’Œå›æº¯

3. **æ•°æ®é©±åŠ¨æµ‹è¯•**
   - åŸºäºæ¨¡æ¿ç”¨ä¾‹æ‰¹é‡ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹
   - åªéœ€ä¿®æ”¹æµ‹è¯•æ•°æ®å³å¯

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç¼–ç å”¯ä¸€æ€§**: æ–°ç”Ÿæˆçš„ç”¨ä¾‹ç¼–ç å¿…é¡»å…¨å±€å”¯ä¸€
2. **æƒé™æ§åˆ¶**: åªæœ‰æœ‰æƒé™çš„ç”¨æˆ·æ‰èƒ½å¤åˆ¶ç”¨ä¾‹
3. **æ•°æ®å®Œæ•´æ€§**: ç¡®ä¿æ‰€æœ‰å…³è”æ•°æ®éƒ½è¢«æ­£ç¡®å¤åˆ¶
4. **JSON å­—æ®µå¤„ç†**: ç³»ç»Ÿä¼šçµæ´»å¤„ç† JSON å­—æ®µï¼Œæ”¯æŒå¯¹è±¡å’Œæ•°ç»„ä¸¤ç§æ ¼å¼
5. **æ¨¡æ¿å…³è”**: å¤åˆ¶åçš„ç”¨ä¾‹ä¼šè®°å½•æºç”¨ä¾‹IDä½œä¸ºæ¨¡æ¿ID

## ğŸ”§ æŠ€æœ¯å®ç°è¦ç‚¹

### å…³é”®ä¿®å¤

ç”±äºæ•°æ®åº“ä¸­æŸäº›æµ‹è¯•ç”¨ä¾‹çš„ `preConditions`ã€`testSteps` ç­‰å­—æ®µå­˜å‚¨çš„æ˜¯å¯¹è±¡è€Œéæ•°ç»„ï¼Œç³»ç»Ÿå®ç°äº†çµæ´»çš„ JSON è§£æç­–ç•¥ï¼š

1. **ä¼˜å…ˆå°è¯•æ•°ç»„è§£æ**: é¦–å…ˆå°è¯•å°† JSON è§£æä¸º List
2. **é™çº§ä¸ºå¯¹è±¡è§£æ**: å¦‚æœå¤±è´¥ï¼Œåˆ™å°† JSON è§£æä¸º Map å¹¶åŒ…è£…ä¸º List
3. **å¼‚å¸¸å®¹é”™**: å¦‚æœéƒ½å¤±è´¥ï¼Œè®°å½•æ—¥å¿—å¹¶è¿”å›ç©ºåˆ—è¡¨ï¼Œä¸å½±å“å…¶ä»–å­—æ®µçš„å¤åˆ¶

è¿™ç¡®ä¿äº†æ¥å£çš„å¥å£®æ€§å’Œå‘åå…¼å®¹æ€§ã€‚

## ğŸ“ æ›´æ–°æ—¥å¿—

- **v1.0** (2025-10-21): åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
  - å®ç°åŸºæœ¬å¤åˆ¶åŠŸèƒ½
  - æ”¯æŒå‚æ•°éªŒè¯
  - æ·»åŠ  JSON å­—æ®µçµæ´»è§£æ
  - å®Œå–„é”™è¯¯å¤„ç†

